{"version":3,"sources":["useEAData.js","sliders.js","FileUpload.js","ThreeVis/useD3Controls.js","ThreeVis/utils.js","ThreeVis/HoverDialog.js","ThreeVis/InstancedPoints.js","ThreeVis/useMousePointInteraction.js","ThreeVis/ThreeVis.js","Footer.js","index.js","usePlayerControl.js","useKeyEvents.js"],"names":["THREE","require","getColor","d","color","Color","toArray","computeColors","data","map","is_best","is_feasible","flat","ProgressBarSlider","withStyles","root","height","thumb","width","backgroundColor","border","marginTop","marginLeft","boxShadow","active","valueLabel","left","track","borderRadius","rail","Slider","BaseSlider","margintop","marginleft","top","background","ProgressBar","min","max","now","label","onChange","className","defaultValue","valueLabelDisplay","aria-label","value","step","Typography","GeneralSlider","valueLabelFormat","FileUpload","setContent","ref","useRef","reader","useMemo","fr","FileReader","onload","e","JSON","parse","result","type","style","display","accept","readAsText","target","files","onClick","current","click","toRadians","angle","Math","PI","useD3Controls","fov","near","far","defaultCameraZoom","useThree","gl","camera","size","useEffect","getScaleFromZ","z","tan","getZFromScale","scale","threeZoom","zoom","scaleExtent","on","x","y","k","position","set","zoomHandler","event","transform","view","select","domElement","call","initialScale","initialTransform","zoomIdentity","translate","getClientPosition","point","clientPosition","Vector3","project","addScalar","divideScalar","getCanvasPosition","multiplyScalar","subScalar","unproject","HoverDialog","pointsAnim","selectedPoint","pointsData","hoverRef","aspect","show","index","group","interpolate","slice","o","i","clientHeight","clientWidth","right","bottom","center","scratchObject3D","Object3D","InstancedPoints","sphereSize","nPoints","speed","setSelectedPoint","meshRef","colorRef","scene","points","colors","colorArray","Float32Array","onFrame","useSpring","config","duration","useAnimatedLayout","mesh","colorAttrib","selectedSize","Array","length","fill","forEach","setScalar","updateMatrix","setMatrixAt","matrix","needsUpdate","instanceMatrix","updateInstancedMeshMatrices","onSelectPoint","mouseDownRef","handlePointerDown","clientX","clientY","handleClick","instanceId","sqrt","pow","stopPropagation","useMousePointInteraction","args","frustumCulled","onPointerDown","attach","attachObject","vertexColors","VertexColors","ThreeVis","useState","onPointerMissed","Footer","url","mail","paddingLeft","marginBottom","fontSize","href","Nav","Item","Link","ReactDOM","render","fileData","setFileData","eaData","sourceData","limits","n","Object","keys","times","time","maxTime","scaleLinear","domain","range","idx","fitness_value","toFixed","constraints_sum","useEAData","setSphereSize","setSpeed","setTime","thisTime","play","setPlay","setPlayCb","playRef","removeTimeout","useCallback","playCb","clearTimeout","playFunc","setTimeout","stopPlay","tooglePlay","PlayerControl","icon","faStepBackward","faCaretLeft","faPause","faPlay","faCaretRight","faStepForward","usePlayerControl","speedStep","minSpeed","maxSpeed","document","onkeydown","tagName","code","useKeyEvents","unit","getElementById"],"mappings":"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","file":"static/js/main.af6a68f4.chunk.js","sourcesContent":["import { useMemo } from 'react';\nimport { scaleLinear, max } from 'd3';\nimport eaData from './data/ea_data.json';\nconst THREE = require('three');\n\nconst pointsScale = 25; // Size to fill the screen\n\n// const colors = ['#ffd700', '#ffb14e', '#fa8775', '#ea5f94', '#cd34b5', '#9d02d7', '#0000ff'];\n\nconst getColor = d => {\n  let color;\n  switch (d) {\n    case 'best':\n      color = new THREE.Color('#5edc1f');\n      break;\n  \n    case 'infeasible':\n      color = new THREE.Color('#dd3300');\n      break;\n\n    default:\n      color = new THREE.Color('#0000ff');\n  }\n  return color.toArray();\n};\n\nconst computeColors = data => {\n  const colors = data.map(d => (\n    d.is_best\n      ? 'best'\n      : d.is_feasible ? 'normal' : 'infeasible'\n  )).map(getColor).flat();\n  return colors;\n};\n\nexport const useEAData = ( fileData ) => ( \n  useMemo(() => {\n    const sourceData = fileData ? fileData : eaData;\n    const { data, limits } = sourceData;\n    const n = data.length;\n    const nPoints = Object.keys(data[0]).length;\n    const times = data.map(d => d[0].time);\n    const maxTime = max(times);\n    const scale = scaleLinear().domain(limits).range([-pointsScale,pointsScale]);\n    const points = data.map(d => d.map(point => [...point.data.map(scale),0]).flat());\n    const colors = data.map(computeColors);\n\n    const pointsData = data.map(d => d.map( point => (\n      `Individual ${point.idx} ${point.is_best ? '(Best!)' : ''}\n       Fitness value: ${point.fitness_value.toFixed(2)}\n       Constraints sum: ${point.constraints_sum.toFixed(2)}\n       Feasible: ${point.is_feasible}\n       Time: ${point.time}\n       `\n    )));\n\n    return { n, nPoints, times, maxTime, points, colors, pointsData };\n  }, [ fileData ])\n);","import 'bootstrap/dist/css/bootstrap.css';\nimport React from 'react';\nimport { Slider, Typography } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst ProgressBarSlider = withStyles({ \n  root: {\n    // color: '#52af77',\n    height: 8,\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: '#fff',\n    border: '2px solid currentColor',\n    marginTop: -8,\n    marginLeft: -12,\n    '&:focus,&:hover,&$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n})(Slider);\n\nconst BaseSlider = withStyles({\n  root: {\n    color: '#8f8f8f',\n  },\n  thumb: {\n    height: 15,\n    width: 15,\n    margintop: -5,\n    marginleft: -5,\n    color: '#787878',\n  },\n  valueLabel: {\n    top: 20,\n    '& *': {\n      background: 'transparent',\n      color: '#000',\n      width: 50\n    },\n  },\n  rail: {\n    height: 5,\n  },\n})(Slider);\n\nexport const ProgressBar = ({ min, max, now, label, onChange }) => {\n  return (\n    <div className='row'>\n      <ProgressBarSlider\n        className='col-8 offset-2'\n        defaultValue={0}\n        valueLabelDisplay='off'\n        aria-label='pretto slider'\n        min={min}\n        max={max}\n        value={now}\n        step={1}\n        onChange={onChange}\n      />\n      <Typography className='col-2 align-self-center'>{label}</Typography>\n    </div>\n  );\n};\n\nexport const GeneralSlider = ({ min, max, now, step, defaultValue, valueLabelFormat, onChange, className }) => {\n  return (\n    <BaseSlider\n      className={className}\n      defaultValue={defaultValue}\n      valueLabelFormat={valueLabelFormat}\n      valueLabelDisplay='on'\n      aria-label='pretto slider'\n      min={min}\n      max={max}\n      value={now}\n      step={step}\n      onChange={onChange}\n      track={false}\n    />\n  );\n};\n","import React, { useMemo, useRef } from 'react';\n\nexport const FileUpload = ({ className, setContent }) => { \n  const ref = useRef();\n  const reader = useMemo(() => {\n    const fr = new FileReader();\n    fr.onload = e => {\n      setContent(JSON.parse(fr.result));\n    };\n    return fr;\n  }, [ setContent ]);\n  return (\n    <div className={className}>\n      <input\n        ref={ref}\n        type='file'\n        style={{display: 'none'}}\n        accept='.json'\n        onChange={e => {\n          reader.readAsText(e.target.files[0]);\n        }}\n      />\n      <button\n        className='btn btn-outline-secondary btn-sm'\n        onClick={() => ref.current.click()}\n      >\n        Upload File\n      </button>\n    </div>\n  );\n };\n","// From https://observablehq.com/@grantcuster/using-three-js-for-2d-data-visualization\nimport { zoom, event, select, zoomIdentity } from 'd3';\nimport { useThree } from 'react-three-fiber';\nimport { useEffect } from 'react';\n\nconst toRadians = angle => (angle * (Math.PI/180));\n\nexport const useD3Controls = ({ fov, near, far, defaultCameraZoom }) => {\n  const { gl, camera, size } = useThree();\n\n  useEffect(() => {\n    const { width, height } = size;\n\n    const zoomHandler = ({ x, y, k }) => {\n      camera.position.set(\n        -(x -  width/2) / k, // x\n        (y - height/2) / k, // y\n        getZFromScale(k)    // z\n      )\n    };\n\n    const getScaleFromZ = z => ( height / (2 * z * Math.tan(toRadians(fov/2))) );\n    const getZFromScale = scale => ( height / scale / (2 * Math.tan(toRadians(fov/2))) );\n\n    const threeZoom = zoom()\n      .scaleExtent([getScaleFromZ(far), getScaleFromZ(near)])\n      .on('zoom', () => {\n        zoomHandler(event.transform);\n      });\n    // Add zoom listener\n    const view = select(gl.domElement);\n    view.call(threeZoom);\n    const initialScale = getScaleFromZ(defaultCameraZoom);\n    const initialTransform = zoomIdentity\n      .translate(width/2, height/2)\n      .scale(initialScale);    \n\n    threeZoom.transform(view, initialTransform);\n    camera.position.set(0, 0, defaultCameraZoom);\n\n    // Double click resets camera\n    view.on('dblclick.zoom', () => {\n      threeZoom.transform(view, initialTransform);\n      camera.position.set(0, 0, defaultCameraZoom);\n    });\n  }, [ fov, near, far, defaultCameraZoom, gl, camera, size ]);\n};\n","const THREE = require('three');\n\nexport const getClientPosition = (point, size, camera) => {\n  const clientPosition = new THREE.Vector3(...point);\n  clientPosition.project(camera).addScalar(1).divideScalar(2);\n  clientPosition.x *= size.width;\n  clientPosition.y *= size.height;\n  return clientPosition;\n};\n\nexport const getCanvasPosition = (clientPosition, size, camera) => {\n  clientPosition.x /= size.width;\n  clientPosition.y /= size.height;\n  clientPosition.multiplyScalar(2).subScalar(1).unproject(camera);\n  return [clientPosition.x, clientPosition.y, 0];\n};\n","import React, { useRef } from 'react';\nimport { useThree, Dom } from 'react-three-fiber';\nimport { a } from 'react-spring/three';\nimport { getClientPosition, getCanvasPosition } from './utils';\n\nconst margin = 10;\n\nexport const HoverDialog = ({ pointsAnim, selectedPoint, pointsData }) => {\n  const hoverRef = useRef();\n  const { size, camera, aspect } = useThree();\n  const { show, index } = selectedPoint;\n\n  return (\n    <a.group\n      position={pointsAnim.interpolate((...d) => {\n        const point = d.slice(index*3, (index+1)*3).map((o,i) => i%3===0 ? o*aspect : o);\n        const clientPosition = getClientPosition(point, size, camera);\n        clientPosition.y -= margin;\n        if ( hoverRef.current ) {\n          const { clientHeight, clientWidth } = hoverRef.current;\n          const position = {\n            left: clientPosition.x - clientWidth/2,\n            right: clientPosition.x + clientWidth/2,\n            top: clientPosition.y,\n            bottom: clientPosition.y - clientHeight,\n          };\n          if ( position.left < 0 ) {\n            clientPosition.x -= position.left;\n          } else if ( position.right > size.width ) {\n            clientPosition.x -= position.right - size.width;\n          }\n          if ( position.bottom < 0 ) {\n            clientPosition.y += 2*margin + clientHeight;\n          }\n        }\n\n        return getCanvasPosition(clientPosition, size, camera);\n      })}\n    >\n      <Dom\n        center={true}\n        style={{\n          transform: `translate3d(-50%, ${ show ? 0 : '1000%' }, 0)`, // Dirty trick to hide the dialog outside of canvas view\n        }}\n        ref={hoverRef}\n      >\n        <div className='hover-description'>\n          { pointsData[index] }\n        </div>\n      </Dom>\n    </a.group>\n  );\n};","import React, { useRef, useEffect, useMemo } from 'react';\nimport { useThree } from 'react-three-fiber';\nimport { useSpring } from 'react-spring/three';\nimport { useD3Controls } from './useD3Controls';\nimport { useMousePointInteraction } from './useMousePointInteraction';\nimport { HoverDialog } from './HoverDialog';\nconst THREE = require('three');\n\n// settings\nconst backgroundColor = new THREE.Color(0xefefef);\nconst selectedPointSize = 2;\n\n// re-use for instance computations\nconst scratchObject3D = new THREE.Object3D();\n\nconst updateInstancedMeshMatrices = ({\n  sphereSize, aspect, mesh, points, colors, colorAttrib, colorArray, selectedPoint\n}) => {\n  if (!mesh) return;\n  const { show, index } = selectedPoint;\n  const selectedSize = show ? sphereSize*selectedPointSize : sphereSize;\n\n  [...Array(points.length/3)].fill(0).forEach((d,i) => {\n    const [ x, y, z ] = points.slice(i*3,(i+1)*3);\n    scratchObject3D.position.set(x*aspect, y, z);\n    scratchObject3D.scale.setScalar(i === index ? selectedSize : sphereSize);\n    scratchObject3D.updateMatrix();\n    mesh.setMatrixAt(i, scratchObject3D.matrix);\n  });\n\n  colors.forEach((d,i) => colorArray[i] = d);\n  colorAttrib.needsUpdate = true;\n  mesh.instanceMatrix.needsUpdate = true;\n};\n\nconst useAnimatedLayout = ({ points, colors, speed, onFrame }) => {\n  const animProps = useSpring({\n    points: points,\n    colors: colors,\n    onFrame: ({ points, colors }) => {\n      onFrame({ points, colors});\n    },\n    config: { duration: speed }\n  });\n\n  return animProps;\n};\n\nexport const InstancedPoints = ({\n  data, sphereSize, nPoints, fov, near, far, defaultCameraZoom, speed, selectedPoint, setSelectedPoint\n}) => {\n  const meshRef = useRef();\n  const colorRef = useRef();\n  const { scene, aspect } = useThree();\n  const { points, colors, pointsData } = data;\n  const colorArray = useMemo(() => new Float32Array(nPoints*3), [ nPoints ]);\n\n  // d3 controls (zoom and pan)\n  useD3Controls({ fov, near, far, defaultCameraZoom });\n\n  useEffect(() => {\n    if ( scene )\n      scene.background = backgroundColor;\n  }, [ scene ]);\n\n  // Animating on change\n  const { points: pointsAnim } = useAnimatedLayout({\n    points,\n    colors,\n    speed,\n    onFrame: ({ points, colors }) => {\n      updateInstancedMeshMatrices({\n        sphereSize,\n        aspect,\n        mesh: meshRef.current,\n        points,\n        colors,\n        colorAttrib: colorRef.current,\n        colorArray,\n        selectedPoint,\n      });\n    },\n  });\n\n  const { handleClick, handlePointerDown } = useMousePointInteraction({\n    selectedPoint,\n    onSelectPoint: setSelectedPoint\n  });\n\n  return (\n    <>\n      <instancedMesh\n        ref={meshRef}\n        args={[null, null, nPoints]}\n        frustumCulled={false}\n        onClick={handleClick}\n        onPointerDown={handlePointerDown}\n      >\n        <sphereBufferGeometry attach='geometry' args={[0.5, 8, 16]} >\n          <instancedBufferAttribute\n            ref={colorRef}\n            attachObject={['attributes', 'color']}\n            args={[colorArray, 3]}\n          />\n        </sphereBufferGeometry>\n        <meshBasicMaterial\n          attach='material'\n          vertexColors={THREE.VertexColors}\n        />\n      </instancedMesh>\n      <HoverDialog {...{pointsAnim, selectedPoint, pointsData}} />\n    </>\n  );\n};\n","import { useRef } from \"react\";\n\nexport const useMousePointInteraction = ({ selectedPoint, onSelectPoint }) => {\n  // track mousedown position to skip click handlers on drags\n  const mouseDownRef = useRef([0, 0]);\n  const handlePointerDown = e => {\n    mouseDownRef.current[0] = e.clientX;\n    mouseDownRef.current[1] = e.clientY;\n  };\n\n  const handleClick = event => {\n    const { instanceId, clientX, clientY } = event;\n    const downDistance = Math.sqrt(\n      Math.pow(mouseDownRef.current[0] - clientX, 2) +\n        Math.pow(mouseDownRef.current[1] - clientY, 2)\n    );\n\n    // skip click if we dragged more than 5px distance\n    if (downDistance > 5) {\n      event.stopPropagation();\n      return;\n    }\n\n    // toggle the point\n    const { show, index } = selectedPoint;\n    onSelectPoint({\n      show: show\n        ? index === instanceId ? false : true\n        : true,\n      index: instanceId\n    });\n  };\n\n  return { handlePointerDown, handleClick };\n};\n","import React, { useState } from 'react';\nimport { Canvas } from 'react-three-fiber';\nimport { InstancedPoints } from './InstancedPoints';\n\n// camera settings\nconst fov = 30;\nconst near = 5;\nconst far = 150;\nconst defaultCameraZoom = 100;\n\nexport const ThreeVis = ({ data, sphereSize, nPoints, speed }) => {\n  const [ selectedPoint, setSelectedPoint ] = useState({ show: false, index: 0});\n\n  return (\n    <Canvas\n      camera={{\n        fov: fov,\n        near: 0.1,\n        far: far+1,\n        position: [0, 0, defaultCameraZoom]\n      }}\n      onPointerMissed={() => setSelectedPoint({ show:false, index: 0})}\n    >\n      <InstancedPoints\n        {...{data, sphereSize, nPoints, fov, near, far, defaultCameraZoom, speed, selectedPoint, setSelectedPoint}}\n      />\n    </Canvas>\n  );\n};","import React from 'react';\nimport { Nav } from 'react-bootstrap';\n\nexport const Footer = ({ url }) => {\n  const mail = 'renato.hermoza@pucp.edu.pe';\n  const social = 'renato145';\n\n  return (\n    <footer style={{ width: '100%' }} className=\"mt-3\">\n      <p style={{ color: '#6c757d', paddingLeft: '1rem', marginBottom: '0rem', fontSize: '0.9rem' }}>\n        Made by: Renato Hermoza, check the{' '}\n        <a href={`https://github.com/renato145/${url}`} target=\"_black\">\n          source code\n        </a>\n        .\n      </p>\n      <hr className=\"mt-2\" />\n      <Nav className=\"justify-content-center\">\n        <Nav.Item>\n          <Nav.Link href={`mailto:${mail}`}>{mail}</Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link href={`https://twitter.com/${social}`} target=\"_black\">\n            Twitter\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link href={`https://github.com/${social}`} target=\"_black\">\n            GitHub\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link href={`https://${social}.github.io`} target=\"_black\">\n            Blog\n          </Nav.Link>\n        </Nav.Item>\n      </Nav>\n    </footer>\n  );\n};\n","import 'bootstrap/dist/css/bootstrap.css';\nimport React, { useState, useMemo } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useEAData } from './useEAData';\nimport { ProgressBar, GeneralSlider } from './sliders';\nimport { FileUpload } from './FileUpload';\nimport './index.css';\nimport { usePlayerControl } from './usePlayerControl';\nimport { useKeyEvents } from './useKeyEvents';\nimport { ThreeVis } from './ThreeVis/ThreeVis';\nimport { Footer } from './Footer';\n\n// controls\nconst defaultSpeed = 250;\nconst defaultSphereSize = 1\nconst speedStep = 25;\nconst minSpeed = 25;\nconst maxSpeed = 2500;\nconst sphereSizeStep = 0.25;\n\nconst App = () => {\n  const [ fileData, setFileData ] = useState(null);\n  const eaData = useEAData(fileData);\n  const { n, nPoints, maxTime } = eaData;\n  const [ sphereSize, setSphereSize ] = useState(defaultSphereSize);\n  const [ speed, setSpeed ] = useState(defaultSpeed);\n  const [ time, setTime ] = useState(0);\n  const data = useMemo(() => ({\n    points: eaData.points[time],\n    colors: eaData.colors[time],\n    pointsData: eaData.pointsData[time],\n    thisTime: eaData.times[time]\n  }), [ time, eaData ]);\n  const { PlayerControl, stopPlay, tooglePlay } = usePlayerControl({ n, setTime, time, speed });\n  useKeyEvents({ tooglePlay, setTime, n, setSpeed, speedStep, minSpeed, maxSpeed })\n\n  return (\n    <div className='main-container'>\n      <div className='canvas-container'>\n        <div className='time-dialog'>\n          {`Time: ${data.thisTime}/${maxTime}`}\n        </div>\n        <ThreeVis {...{data, sphereSize, nPoints, speed }} />\n      </div>\n      <div className='html-bottom-container'>\n        <ProgressBar\n          min={0}\n          max={n-1}\n          now={time}\n          label={`${time}/${n-1} gen`}\n          onChange={(e,value) => setTime(value) }\n        />\n        { PlayerControl }\n        <div className='row'>\n          <GeneralSlider\n            className={'col-4 offset-4'}\n            min={25}\n            max={2500}\n            now={speed}\n            step={speedStep}\n            valueLabelFormat={d => `${d} ms`}\n            unit={'ms'}\n            defaultValue={defaultSpeed}\n            onChange={(e,value) => setSpeed(value)}\n          />\n          <GeneralSlider\n            className={'col-1 offset-1'}\n            min={0.25}\n            max={5}\n            now={sphereSize}\n            step={sphereSizeStep}\n            valueLabelFormat={d => `${d.toFixed(2)} sz`}\n            defaultValue={defaultSphereSize}\n            onChange={(e,value) => setSphereSize(value)}\n          />\n        </div>\n        <FileUpload\n          className='row file-upload offset-1'\n          setContent={d => {\n            setFileData(d);\n            setTime(0);\n            stopPlay();\n          }}\n        />\n      </div>\n      <Footer url=\"show_evolution\" />\n    </div>\n  )\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React, { useRef, useState, useCallback } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlay, faPause, faCaretLeft, faCaretRight, faStepBackward, faStepForward } from '@fortawesome/free-solid-svg-icons'\n\nexport const usePlayerControl = ({ n, setTime, time, speed }) => {\n  const [ play, setPlay ] = useState(false);\n  const [, setPlayCb ] = useState(null)\n  const playRef = useRef();\n  playRef.current = { n, time, speed, play };\n  \n  const removeTimeout = useCallback(() => {\n    setPlayCb(playCb => {\n      if ( playCb ) {\n        clearTimeout(playCb);\n        return null;\n      }\n    });\n  }, []);\n\n  const playFunc = useCallback(() => {\n    const { n, time, speed, play } = playRef.current;\n    if ( (time < (n-1)) & play ) {\n      setTime(time + 1);\n      setPlayCb(setTimeout(playFunc, speed));\n    } else {\n      setPlay(false);\n      removeTimeout();\n    }\n  }, [ removeTimeout, setTime ]);\n\n  const stopPlay = useCallback(() => {\n    setPlay(false);\n    removeTimeout();\n  }, [ removeTimeout ])\n\n  const tooglePlay = useCallback(() => {\n    const { speed, play } = playRef.current;\n    if ( !play ) {\n      setPlay(true);\n      setPlayCb(setTimeout(playFunc, speed));\n    } else {\n      setPlay(false);\n      removeTimeout();\n    }\n  }, [ playFunc, removeTimeout ]);\n\n  const PlayerControl =  (\n    <div className='controllers row justify-content-center'>\n      <div className='button-container'>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(0)}\n        >\n          <FontAwesomeIcon icon={faStepBackward} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(d => Math.max(d-1, 0) )}\n        >\n          <FontAwesomeIcon icon={faCaretLeft} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={tooglePlay}\n        >\n          <FontAwesomeIcon icon={play ? faPause : faPlay} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(d => Math.min(d+1, n-1) )}\n        >\n          <FontAwesomeIcon icon={faCaretRight} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(n-1)}\n        >\n          <FontAwesomeIcon icon={faStepForward} />\n        </button>\n      </div>\n    </div>\n  );\n\n  return { PlayerControl, stopPlay, tooglePlay };\n};\n","import { useEffect } from \"react\";\n\nexport const useKeyEvents = ({ tooglePlay, setTime, n, setSpeed, speedStep, minSpeed, maxSpeed }) => {\n  useEffect(() => {\n    document.onkeydown = e => {\n      if (e.target.tagName === 'BODY') {\n        switch (e.code) {\n          case 'Space':\n            tooglePlay();\n            break;\n        \n          case 'ArrowLeft':\n            setTime(d => Math.max(d-1, 0) );\n            break;\n\n          case 'ArrowRight':\n            setTime(d => Math.min(d+1, n-1) );\n            break;\n\n          case 'ArrowUp':\n            setSpeed(d => Math.min(d+speedStep, maxSpeed))\n            break;\n\n          case 'ArrowDown':\n            setSpeed(d => Math.max(d-speedStep, minSpeed))\n            break;\n\n          default:\n            break;\n        }\n      }\n    };\n  }, [ tooglePlay, setTime, n, setSpeed, speedStep, maxSpeed, minSpeed ]);\n};\n"],"sourceRoot":""}