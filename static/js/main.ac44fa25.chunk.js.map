{"version":3,"sources":["useEAData.js","sliders.js","FileUpload.js","PlayerControl.js","ThreeVis/useD3Controls.js","ThreeVis/utils.js","ThreeVis/HoverDialog.js","ThreeVis/InstancedPoints.js","ThreeVis/useMousePointInteraction.js","ThreeVis/ThreeVis.js","index.js"],"names":["THREE","require","getColor","d","color","Color","toArray","computeColors","data","map","is_best","is_feasible","flat","ProgressBarSlider","withStyles","root","height","thumb","width","backgroundColor","border","marginTop","marginLeft","boxShadow","active","valueLabel","left","track","borderRadius","rail","Slider","BaseSlider","margintop","marginleft","top","background","ProgressBar","min","max","now","label","onChange","className","defaultValue","valueLabelDisplay","aria-label","value","step","Typography","GeneralSlider","valueLabelFormat","FileUpload","setContent","ref","useRef","reader","useMemo","fr","FileReader","onload","e","JSON","parse","result","type","style","display","accept","readAsText","target","files","onClick","current","click","PlayerControl","n","setTime","time","speed","useState","play","setPlay","playCb","setPlayCb","playRef","removeTimeout","clearTimeout","playFunc","setTimeout","tooglePlay","useEffect","document","addEventListener","code","icon","faStepBackward","Math","faCaretLeft","faPause","faPlay","faCaretRight","faStepForward","toRadians","angle","PI","useD3Controls","fov","near","far","defaultCameraZoom","useThree","gl","camera","size","getScaleFromZ","z","tan","getZFromScale","scale","threeZoom","zoom","scaleExtent","on","x","y","k","position","set","zoomHandler","event","transform","view","select","domElement","call","initialScale","initialTransform","zoomIdentity","translate","getClientPosition","point","clientPosition","Vector3","project","addScalar","divideScalar","getCanvasPosition","multiplyScalar","subScalar","unproject","HoverDialog","pointsAnim","selectedPoint","pointsData","hoverRef","aspect","show","index","group","interpolate","slice","o","i","clientHeight","clientWidth","right","bottom","center","scratchObject3D","Object3D","InstancedPoints","sphereSize","nPoints","setSelectedPoint","meshRef","colorRef","scene","points","colors","colorArray","Float32Array","onFrame","useSpring","config","duration","useAnimatedLayout","mesh","colorAttrib","selectedSize","Array","length","fill","forEach","setScalar","updateMatrix","setMatrixAt","matrix","needsUpdate","instanceMatrix","updateInstancedMeshMatrices","onSelectPoint","mouseDownRef","handlePointerDown","clientX","clientY","handleClick","instanceId","sqrt","pow","stopPropagation","useMousePointInteraction","args","frustumCulled","onPointerDown","attach","attachObject","vertexColors","VertexColors","ThreeVis","onPointerMissed","ReactDOM","render","fileData","setFileData","eaData","sourceData","limits","Object","keys","times","maxTime","scaleLinear","domain","range","idx","fitness_value","toFixed","constraints_sum","useEAData","setSphereSize","setSpeed","thisTime","unit","href","getElementById"],"mappings":"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","file":"static/js/main.ac44fa25.chunk.js","sourcesContent":["import { useMemo } from 'react';\nimport { scaleLinear, max, json } from 'd3';\nimport eaData from './data/ea_data.json';\nconst THREE = require('three');\n\nconst pointsScale = 25; // Size to fill the screen\n\n// const colors = ['#ffd700', '#ffb14e', '#fa8775', '#ea5f94', '#cd34b5', '#9d02d7', '#0000ff'];\n\nconst getColor = d => {\n  let color;\n  switch (d) {\n    case 'best':\n      color = new THREE.Color('#5edc1f');\n      break;\n  \n    case 'infeasible':\n      color = new THREE.Color('#dd3300');\n      break;\n\n    default:\n      color = new THREE.Color('#0000ff');\n  }\n  return color.toArray();\n};\n\nconst computeColors = data => {\n  const colors = data.map(d => (\n    d.is_best\n      ? 'best'\n      : d.is_feasible ? 'normal' : 'infeasible'\n  )).map(getColor).flat();\n  return colors;\n};\n\nexport const useEAData = ( fileData ) => ( \n  useMemo(() => {\n    const sourceData = fileData ? fileData : eaData;\n    const { data, limits } = sourceData;\n    const n = data.length;\n    const nPoints = Object.keys(data[0]).length;\n    const times = data.map(d => d[0].time);\n    const maxTime = max(times);\n    const scale = scaleLinear().domain(limits).range([-pointsScale,pointsScale]);\n    const points = data.map(d => d.map(point => [...point.data.map(scale),0]).flat());\n    const colors = data.map(computeColors);\n\n    const pointsData = data.map(d => d.map( point => (\n      `Individual ${point.idx} ${point.is_best ? '(Best!)' : ''}\n       Fitness value: ${point.fitness_value.toFixed(2)}\n       Constraints sum: ${point.constraints_sum.toFixed(2)}\n       Feasible: ${point.is_feasible}\n       Time: ${point.time}\n       `\n    )));\n\n    return { n, nPoints, times, maxTime, points, colors, pointsData };\n  }, [ fileData ])\n);","import 'bootstrap/dist/css/bootstrap.css';\nimport React from 'react';\nimport { Slider, Typography } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst ProgressBarSlider = withStyles({ \n  root: {\n    // color: '#52af77',\n    height: 8,\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: '#fff',\n    border: '2px solid currentColor',\n    marginTop: -8,\n    marginLeft: -12,\n    '&:focus,&:hover,&$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n})(Slider);\n\nconst BaseSlider = withStyles({\n  root: {\n    color: '#8f8f8f',\n  },\n  thumb: {\n    height: 15,\n    width: 15,\n    margintop: -5,\n    marginleft: -5,\n    color: '#787878',\n  },\n  valueLabel: {\n    top: 20,\n    '& *': {\n      background: 'transparent',\n      color: '#000',\n      width: 50\n    },\n  },\n  rail: {\n    height: 5,\n  },\n})(Slider);\n\nexport const ProgressBar = ({ min, max, now, label, onChange }) => {\n  return (\n    <div className='row'>\n      <ProgressBarSlider\n        className='col-8 offset-2'\n        defaultValue={0}\n        valueLabelDisplay='off'\n        aria-label='pretto slider'\n        min={min}\n        max={max}\n        value={now}\n        step={1}\n        onChange={onChange}\n      />\n      <Typography className='col-2 align-self-center'>{label}</Typography>\n    </div>\n  );\n};\n\nexport const GeneralSlider = ({ min, max, step, defaultValue, valueLabelFormat, onChange, className }) => {\n  return (\n    <BaseSlider\n      className={className}\n      defaultValue={defaultValue}\n      valueLabelFormat={valueLabelFormat}\n      valueLabelDisplay='on'\n      aria-label='pretto slider'\n      min={min}\n      max={max}\n      step={step}\n      onChange={onChange}\n      track={false}\n    />\n  );\n};\n","import React, { useMemo, useRef } from 'react';\n\nexport const FileUpload = ({ className, setContent }) => { \n  const ref = useRef();\n  const reader = useMemo(() => {\n    const fr = new FileReader();\n    fr.onload = e => {\n      setContent(JSON.parse(fr.result));\n    };\n    return fr;\n  }, []);\n  return (\n    <div className={className}>\n      <input\n        ref={ref}\n        type='file'\n        style={{display: 'none'}}\n        accept='.json'\n        onChange={e => {\n          reader.readAsText(e.target.files[0]);\n        }}\n      />\n      <button\n        className='btn btn-outline-secondary btn-sm'\n        onClick={() => ref.current.click()}\n      >\n        Upload File\n      </button>\n    </div>\n  );\n };\n","import React, { useRef, useState, useEffect } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlay, faPause, faCaretLeft, faCaretRight, faStepBackward, faStepForward } from '@fortawesome/free-solid-svg-icons'\n\nexport const PlayerControl = ({ n, setTime, time, speed }) => {\n  const [ play, setPlay ] = useState(false);\n  const [ playCb, setPlayCb ] = useState(null)\n  const playRef = useRef();\n  playRef.current = { n, time, speed, play };\n  \n  const removeTimeout = () => {\n    if ( playCb ) {\n      clearTimeout(playCb);\n      setPlayCb(null);\n    }\n  };\n\n  const playFunc = () => {\n    const { n, time, speed, play } = playRef.current;\n    if ( (time < (n-1)) & play ) {\n      setTime(time + 1);\n      setPlayCb(setTimeout(playFunc, speed));\n    } else {\n      setPlay(false);\n      removeTimeout();\n    }\n  };\n\n  const tooglePlay = () => {\n    const { speed, play } = playRef.current;\n    if ( !play ) {\n      setPlay(true);\n      setPlayCb(setTimeout(playFunc, speed));\n    } else {\n      setPlay(false);\n      removeTimeout();\n    }\n  };\n\n  // Playback keys\n  useEffect(() => {\n    document.addEventListener('keydown', e => {\n      if(e.code==='Space'){\n        tooglePlay();\n      }\n    });\n  }, [])\n\n  return (\n    <div className='controllers row justify-content-center'>\n      <div className='button-container'>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(0)}\n        >\n          <FontAwesomeIcon icon={faStepBackward} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(d => Math.max(d-1, 0) )}\n        >\n          <FontAwesomeIcon icon={faCaretLeft} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={tooglePlay}\n        >\n          <FontAwesomeIcon icon={play ? faPause : faPlay} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(d => Math.min(d+1, n-1) )}\n        >\n          <FontAwesomeIcon icon={faCaretRight} />\n        </button>\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={() => setTime(n-1)}\n        >\n          <FontAwesomeIcon icon={faStepForward} />\n        </button>\n      </div>\n    </div>\n  );\n};\n","// From https://observablehq.com/@grantcuster/using-three-js-for-2d-data-visualization\nimport { zoom, event, select, zoomIdentity } from 'd3';\nimport { useThree } from 'react-three-fiber';\nimport { useEffect } from 'react';\n\nconst toRadians = angle => (angle * (Math.PI/180));\n\nexport const useD3Controls = ({ fov, near, far, defaultCameraZoom }) => {\n  const { gl, camera, size } = useThree();\n  const { width, height } = size;\n\n  const zoomHandler = ({ x, y, k }) => {\n    camera.position.set(\n      -(x -  width/2) / k, // x\n       (y - height/2) / k, // y\n       getZFromScale(k)    // z\n    )\n  };\n\n  const getScaleFromZ = z => ( height / (2 * z * Math.tan(toRadians(fov/2))) );\n  const getZFromScale = scale => ( height / scale / (2 * Math.tan(toRadians(fov/2))) );\n\n  const threeZoom = zoom()\n    .scaleExtent([getScaleFromZ(far), getScaleFromZ(near)])\n    .on('zoom', () => {\n      zoomHandler(event.transform);\n    });\n  \n  // Add zoom listener\n  const view = select(gl.domElement);\n  view.call(threeZoom);\n  const initialScale = getScaleFromZ(defaultCameraZoom);\n  const initialTransform = zoomIdentity\n    .translate(width/2, height/2)\n    .scale(initialScale);    \n\n  useEffect(() => {\n    threeZoom.transform(view, initialTransform);\n    camera.position.set(0, 0, defaultCameraZoom);\n  }, [ camera ]);\n\n  // Double click resets camera\n  view.on('dblclick.zoom', () => {\n    threeZoom.transform(view, initialTransform);\n    camera.position.set(0, 0, defaultCameraZoom);\n  });\n};\n","const THREE = require('three');\n\nexport const getClientPosition = (point, size, camera) => {\n  const clientPosition = new THREE.Vector3(...point);\n  clientPosition.project(camera).addScalar(1).divideScalar(2);\n  clientPosition.x *= size.width;\n  clientPosition.y *= size.height;\n  return clientPosition;\n};\n\nexport const getCanvasPosition = (clientPosition, size, camera) => {\n  clientPosition.x /= size.width;\n  clientPosition.y /= size.height;\n  clientPosition.multiplyScalar(2).subScalar(1).unproject(camera);\n  return [clientPosition.x, clientPosition.y, 0];\n};\n","import React, { useRef } from 'react';\nimport { useThree, Dom } from 'react-three-fiber';\nimport { a } from 'react-spring/three';\nimport { getClientPosition, getCanvasPosition } from './utils';\n\nconst margin = 10;\n\nexport const HoverDialog = ({ pointsAnim, selectedPoint, pointsData }) => {\n  const hoverRef = useRef();\n  const { size, camera, aspect } = useThree();\n  const { show, index } = selectedPoint;\n\n  return (\n    <a.group\n      position={pointsAnim.interpolate((...d) => {\n        const point = d.slice(index*3, (index+1)*3).map((o,i) => i%3===0 ? o*aspect : o);\n        const clientPosition = getClientPosition(point, size, camera);\n        clientPosition.y -= margin;\n        if ( hoverRef.current ) {\n          const { clientHeight, clientWidth } = hoverRef.current;\n          const position = {\n            left: clientPosition.x - clientWidth/2,\n            right: clientPosition.x + clientWidth/2,\n            top: clientPosition.y,\n            bottom: clientPosition.y - clientHeight,\n          };\n          if ( position.left < 0 ) {\n            clientPosition.x -= position.left;\n          } else if ( position.right > size.width ) {\n            clientPosition.x -= position.right - size.width;\n          }\n          if ( position.bottom < 0 ) {\n            clientPosition.y += 2*margin + clientHeight;\n          }\n        }\n\n        return getCanvasPosition(clientPosition, size, camera);\n      })}\n    >\n      <Dom\n        center={true}\n        style={{\n          transform: `translate3d(-50%, ${ show ? 0 : '1000%' }, 0)`,\n        }}\n        ref={hoverRef}\n      >\n        <div className='hover-description'>\n          { pointsData[index] }\n        </div>\n      </Dom>\n    </a.group>\n  );\n};","import React, { useRef, useEffect, useMemo, useState, useCallback } from 'react';\nimport { useThree } from 'react-three-fiber';\nimport { useSpring } from 'react-spring/three';\nimport { useD3Controls } from './useD3Controls';\nimport { useMousePointInteraction } from './useMousePointInteraction';\nimport { HoverDialog } from './HoverDialog';\nconst THREE = require('three');\n\n// settings\nconst backgroundColor = new THREE.Color(0xefefef);\nconst selectedPointSize = 2;\n\n// re-use for instance computations\nconst scratchObject3D = new THREE.Object3D();\n\nconst updateInstancedMeshMatrices = ({\n  sphereSize, aspect, mesh, points, colors, colorAttrib, colorArray, selectedPoint\n}) => {\n  if (!mesh) return;\n  const { show, index } = selectedPoint;\n  const selectedSize = show ? sphereSize*selectedPointSize : sphereSize;\n\n  [...Array(points.length/3)].fill(0).forEach((d,i) => {\n    const [ x, y, z ] = points.slice(i*3,(i+1)*3);\n    scratchObject3D.position.set(x*aspect, y, z);\n    scratchObject3D.scale.setScalar(i === index ? selectedSize : sphereSize);\n    scratchObject3D.updateMatrix();\n    mesh.setMatrixAt(i, scratchObject3D.matrix);\n  });\n\n  colors.forEach((d,i) => colorArray[i] = d);\n  colorAttrib.needsUpdate = true;\n  mesh.instanceMatrix.needsUpdate = true;\n};\n\nconst useAnimatedLayout = ({ points, colors, speed, onFrame }) => {\n  const animProps = useSpring({\n    points: points,\n    colors: colors,\n    onFrame: ({ points, colors }) => {\n      onFrame({ points, colors});\n    },\n    config: { duration: speed }\n  });\n\n  return animProps;\n};\n\nexport const InstancedPoints = ({\n  data, sphereSize, nPoints, fov, near, far, defaultCameraZoom, speed, selectedPoint, setSelectedPoint\n}) => {\n  const meshRef = useRef();\n  const colorRef = useRef();\n  const { scene, aspect } = useThree();\n  const { points, colors, pointsData } = data;\n  const colorArray = useMemo(() => new Float32Array(nPoints*3), [ nPoints ]);\n\n  // d3 controls (zoom and pan)\n  useD3Controls({ fov, near, far, defaultCameraZoom });\n\n  useEffect(() => {\n    if ( scene )\n      scene.background = backgroundColor;\n  }, [ scene ]);\n\n  // Animating on change\n  const { points: pointsAnim } = useAnimatedLayout({\n    points,\n    colors,\n    speed,\n    onFrame: ({ points, colors }) => {\n      updateInstancedMeshMatrices({\n        sphereSize,\n        aspect,\n        mesh: meshRef.current,\n        points,\n        colors,\n        colorAttrib: colorRef.current,\n        colorArray,\n        selectedPoint,\n      });\n    },\n  });\n\n  const { handleClick, handlePointerDown } = useMousePointInteraction({\n    selectedPoint,\n    onSelectPoint: setSelectedPoint\n  });\n\n  return (\n    <>\n      <instancedMesh\n        ref={meshRef}\n        args={[null, null, nPoints]}\n        frustumCulled={false}\n        onClick={handleClick}\n        onPointerDown={handlePointerDown}\n      >\n        <sphereBufferGeometry attach='geometry' args={[0.5, 8, 16]} >\n          <instancedBufferAttribute\n            ref={colorRef}\n            attachObject={['attributes', 'color']}\n            args={[colorArray, 3]}\n          />\n        </sphereBufferGeometry>\n        <meshBasicMaterial\n          attach='material'\n          vertexColors={THREE.VertexColors}\n        />\n      </instancedMesh>\n      <HoverDialog {...{pointsAnim, selectedPoint, pointsData}} />\n    </>\n  );\n};\n","import { useRef } from \"react\";\n\nexport const useMousePointInteraction = ({ selectedPoint, onSelectPoint }) => {\n  // track mousedown position to skip click handlers on drags\n  const mouseDownRef = useRef([0, 0]);\n  const handlePointerDown = e => {\n    mouseDownRef.current[0] = e.clientX;\n    mouseDownRef.current[1] = e.clientY;\n  };\n\n  const handleClick = event => {\n    const { instanceId, clientX, clientY } = event;\n    const downDistance = Math.sqrt(\n      Math.pow(mouseDownRef.current[0] - clientX, 2) +\n        Math.pow(mouseDownRef.current[1] - clientY, 2)\n    );\n\n    // skip click if we dragged more than 5px distance\n    if (downDistance > 5) {\n      event.stopPropagation();\n      return;\n    }\n\n    // toggle the point\n    const { show, index } = selectedPoint;\n    onSelectPoint({\n      show: show\n        ? index === instanceId ? false : true\n        : true,\n      index: instanceId\n    });\n  };\n\n  return { handlePointerDown, handleClick };\n};\n","import React, { useState } from 'react';\nimport { Canvas } from 'react-three-fiber';\nimport { InstancedPoints } from './InstancedPoints';\nconst THREE = require('three');\n\n// camera settings\nconst fov = 30;\nconst near = 5;\nconst far = 150;\nconst defaultCameraZoom = 100;\n\nexport const ThreeVis = ({ data, sphereSize, nPoints, speed }) => {\n  const [ selectedPoint, setSelectedPoint ] = useState({ show: false, index: 0});\n\n  return (\n    <Canvas\n      camera={{\n        fov: fov,\n        near: 0.1,\n        far: far+1,\n        position: [0, 0, defaultCameraZoom]\n      }}\n      onPointerMissed={() => setSelectedPoint({ show:false, index: 0})}\n    >\n      <InstancedPoints\n        {...{data, sphereSize, nPoints, fov, near, far, defaultCameraZoom, speed, selectedPoint, setSelectedPoint}}\n      />\n    </Canvas>\n  );\n};","import 'bootstrap/dist/css/bootstrap.css';\nimport React, { useState, useMemo, useRef, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useEAData } from './useEAData';\nimport { ProgressBar, GeneralSlider } from './sliders';\nimport { FileUpload } from './FileUpload';\nimport './index.css';\nimport { PlayerControl } from './PlayerControl';\nimport { ThreeVis } from './ThreeVis/ThreeVis';\n\n// controls\nconst defaultSpeed = 250;\nconst defaultSphereSize = 1\n\nconst App = () => {\n  const [ fileData, setFileData ] = useState(null);\n  const eaData = useEAData(fileData);\n  const { n, nPoints, maxTime } = eaData;\n  const [ sphereSize, setSphereSize ] = useState(defaultSphereSize);\n  const [ speed, setSpeed ] = useState(defaultSpeed);\n  const [ time, setTime ] = useState(0);\n  const data = useMemo(() => ({\n    points: eaData.points[time],\n    colors: eaData.colors[time],\n    pointsData: eaData.pointsData[time],\n    thisTime: eaData.times[time]\n  }), [ time, eaData ]);\n\n  return (\n    <div className='main-container'>\n      <div className='canvas-container'>\n        <div className='time-dialog'>\n          {`Time: ${data.thisTime}/${maxTime}`}\n        </div>\n        <ThreeVis {...{data, sphereSize, nPoints, speed}} />\n      </div>\n      <div className='html-bottom-container'>\n        <ProgressBar\n          min={0}\n          max={n-1}\n          now={time}\n          label={`${time}/${n-1} gen`}\n          onChange={(e,value) => setTime(value) }\n        />\n        <PlayerControl {...{ n, setTime, time, speed }} />\n        <div className='row'>\n          <GeneralSlider\n            className={'col-4 offset-4'}\n            min={25}\n            max={2500}\n            step={25}\n            valueLabelFormat={d => `${d} ms`}\n            unit={'ms'}\n            defaultValue={defaultSpeed}\n            onChange={(e,value) => setSpeed(value)}\n          />\n          <GeneralSlider\n            className={'col-1 offset-1'}\n            min={0.25}\n            max={5}\n            step={0.25}\n            valueLabelFormat={d => `${d.toFixed(2)} sz`}\n            defaultValue={defaultSphereSize}\n            onChange={(e,value) => setSphereSize(value)}\n          />\n        </div>\n        <FileUpload\n          className='row file-upload offset-1'\n          setContent={setFileData}\n        />\n        <div className='git-info row justify-content-end'>\n          <a href='https://github.com/renato145/show_evolution'>Source code</a>\n        </div>\n      </div>\n    </div>\n  )\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}