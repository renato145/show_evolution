(this.webpackJsonpthreejs_tests=this.webpackJsonpthreejs_tests||[]).push([[0],{62:function(e,t,a){e.exports=a(78)},72:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(4),r=(a(63),a(0)),o=a.n(r),c=a(16),i=a.n(c),s=a(50),u=a(87),l=a(21),f=a(18),m=a(20),b=a(47),p=a(17),d=function(e){return e*(Math.PI/180)},h=function(e){var t=e.fov,a=e.near,n=e.far,r=e.defaultCameraZoom,o=e.renderer,c=e.camera,i=e.size,s=i.width,u=i.height,l=function(e){return u/(2*e*Math.tan(d(t/2)))},f=function(e){return u/e/(2*Math.tan(d(t/2)))},m=Object(p.c)().scaleExtent([l(n),l(a)]).on("zoom",(function(){!function(e){var t=e.x,a=e.y,n=e.k;c.position.set(-(t-s/2)/n,(a-u/2)/n,f(n))}(p.a.transform)})),b=Object(p.b)(o.domElement);b.call(m);var h=l(r),E=p.d.translate(s/2,u/2).scale(h);m.transform(b,E),c.position.set(0,0,r),b.on("dblclick.zoom",(function(){m.transform(b,E),c.position.set(0,0,r)}))},E=a(6),v=(a(72),a(6)),j=new v.Color(15724527),O=["#ffd700","#ffb14e","#fa8775","#ea5f94","#cd34b5","#9d02d7","#0000ff"],y=(new v.TextureLoader).load("textures/discNoShadow.png"),g=function(){return 50*(Math.random()-.5)},w=function(){var e=[];return Array(100).fill().forEach((function(){e.push(g(),g(),0)})),e},x=function(){var e=[];return Array(100).fill().forEach((function(){var t=new v.Color(O[parseInt(Math.random()*O.length)]),a=t.r,n=t.g,r=t.b;e.push(a,n,r)})),e},S=function(e){var t=e.data,a=t.points,c=t.colors,i=t.pointsData,s=e.setHoverData,u=Object(m.d)(),l=u.scene,f=u.aspect,d=u.gl,O=u.camera,g=u.size,w=u.mouse,x=Object(r.useRef)(),S=Object(r.useRef)(),C=Object(r.useRef)();Object(r.useEffect)((function(){h({fov:30,near:20,far:150,defaultCameraZoom:100,renderer:d,camera:O,size:g})}),[d,O,g]);var z=Object(r.useRef)(),M=Object(r.useMemo)((function(){return{point:new Float32Array(3),color:new Float32Array(3),show:!1}}),[]),A=Object(r.useCallback)((function(e){var t=e.index,a=e.x,n=e.y;N.slice(3*t,3*(t+1)).forEach((function(e,t){M.point[t]=e})),k.slice(3*t,3*(t+1)).forEach((function(e,t){M.color[t]=e})),M.show=!0,z.current.attributes.position.needsUpdate=!0,z.current.attributes.color.needsUpdate=!0;var r=c.slice(3*t,3*(t+1)).map((function(e){return e.toFixed(2)}));s(function(e){var t=e.description,a=e.top,n=e.left,r=e.size,c=n+150>r.width?r.right-150:Math.max(n-75,r.left);return o.a.createElement("div",{className:"hover-description",style:{top:a,left:c,width:150}},t)}({description:"mouse over: ".concat(i[t],"\nColor: rgb(").concat(r,")"),top:n,left:a,size:g}))}),[a,g,i,c]);!function(e){var t=e.renderer,a=e.mouse,n=e.camera,o=e.size,c=e.pointsRef,i=e.onPointHover,s=e.onPointOut,u=Object(r.useMemo)((function(){var e=new E.Raycaster;return e.params.Points.threshold=1,e}),[]),l=Object(r.useCallback)((function(e){u.setFromCamera(e,n);var t=u.intersectObject(c.current);if(t[0]){var a=t.sort((function(e){return e.distanceToRay}))[0],r=a.point;r.project(n).addScalar(1).divideScalar(2);var l=r.x*o.width,f=(1-r.y)*o.height;i({index:a.index,x:l,y:f})}else s()}),[o,i]);Object(r.useEffect)((function(){Object(p.b)(t.domElement).on("mousemove",(function(){l(a)}))}),[t,a,l])}({renderer:d,mouse:w,camera:O,size:g,pointsRef:S,onPointHover:A,onPointOut:function(){M.show=!1,s("")}});var N=Object(r.useMemo)((function(){return new Float32Array(300)}),[]),k=Object(r.useMemo)((function(){return new Float32Array(300)}),[]),D=Object(b.a)((function(){return{pointsSpring:a,colorsSpring:Array(300).fill(1)}})),R=Object(n.a)(D,2),U=R[0],T=U.pointsSpring,F=U.colorsSpring,P=R[1];return Object(r.useEffect)((function(){P({pointsSpring:a})}),[a,P]),Object(r.useEffect)((function(){P({colorsSpring:c})}),[c,P]),Object(m.c)((function(){T.getValue().forEach((function(e,t){var a=t%3===0?e*f:e;N[t]=a})),F.getValue().forEach((function(e,t){k[t]=e})),C.current.attributes.position.needsUpdate=!0,C.current.attributes.color.needsUpdate=!0})),Object(r.useEffect)((function(){l.background=j}),[l]),o.a.createElement("group",null,o.a.createElement("mesh",{ref:x},o.a.createElement("points",{ref:S},o.a.createElement("bufferGeometry",{attach:"geometry",ref:C},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:a.length/3,array:N,itemSize:3,usage:v.DynamicDrawUsage}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:a.length/3,array:k,itemSize:3,usage:v.DynamicDrawUsage})),o.a.createElement("pointsMaterial",{attach:"material",size:15,map:y,transparent:!0,alphaTest:.5,sizeAttenuation:!1,vertexColors:v.VertexColors}))),o.a.createElement("mesh",null,o.a.createElement("points",null,o.a.createElement("bufferGeometry",{attach:"geometry",ref:z},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:M.show,array:M.point,itemSize:3,usage:v.DynamicDrawUsage}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:1,array:M.color,itemSize:3,usage:v.DynamicDrawUsage})),o.a.createElement("pointsMaterial",{attach:"material",size:40,map:y,transparent:!0,alphaTest:.5,sizeAttenuation:!1,vertexColors:v.VertexColors}))))};i.a.render(o.a.createElement((function(){var e,t=(e="filepath",Object(r.useMemo)((function(){return{n:10}}),[e])).n,a=Object(r.useState)(1e3),c=Object(n.a)(a,2),i=c[0],b=c[1],p=Object(r.useState)(0),d=Object(n.a)(p,2),h=d[0],E=d[1],v=Object(r.useState)(!1),j=Object(n.a)(v,2),O=j[0],y=j[1],g=Object(r.useState)(""),C=Object(n.a)(g,2),z=C[0],M=C[1],A=Object(r.useMemo)((function(){return{points:w(),colors:x(),pointsData:x()}}),[h]),N=Object(r.useRef)();N.current={n:t,time:h,speed:i,play:O};var k=function e(){var t=N.current,a=t.n,n=t.time,r=t.speed;n<a-1&t.play?(E(n+1),setTimeout(e,r)):y(!1)};return o.a.createElement("div",{style:{height:"100%"}},o.a.createElement("div",{className:"canvas-container h-100"},o.a.createElement(m.a,{camera:{fov:30,near:.1,far:151,position:[0,0,100]}},o.a.createElement(S,{data:A,setHoverData:M})),z,o.a.createElement(s.a,{animated:O,min:0,max:t-1,now:h,label:"".concat(h,"/").concat(t-1)}),o.a.createElement("div",{className:"controllers row justify-content-center"},o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return E(0)}},o.a.createElement(l.a,{icon:f.e})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return E((function(e){return Math.max(e-1,0)}))}},o.a.createElement(l.a,{icon:f.a})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){var e=N.current,t=e.speed;e.play?y(!1):(y(!0),setTimeout(k,t))}},o.a.createElement(l.a,{icon:O?f.c:f.d})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return E((function(e){return Math.min(e+1,t-1)}))}},o.a.createElement(l.a,{icon:f.b})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return E(t-1)}},o.a.createElement(l.a,{icon:f.f}))),o.a.createElement("div",{className:"speed-controller row"},o.a.createElement("span",{className:"col"},"Speed"),o.a.createElement(u.a,{className:"slider col",defaultValue:1e3,getAriaValueText:function(e){return e},valueLabelDisplay:"auto",min:0,max:5e3,step:100,marks:!0,onChange:function(e,t){return b(t)}}))),o.a.createElement("div",{className:"git-info row justify-content-right"},o.a.createElement("a",{href:"https://github.com/renato145/show_evolution"},"Source code"))))}),null),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.943dee7e.chunk.js.map