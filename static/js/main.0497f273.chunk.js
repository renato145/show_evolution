(this.webpackJsonpthreejs_tests=this.webpackJsonpthreejs_tests||[]).push([[0],{66:function(e,t,a){e.exports=a(81)},77:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(4),r=(a(48),a(0)),o=a.n(r),c=a(19),i=a.n(c),u=a(26),s=a(22),l=a(25),f=a(54),m=a(21),b=function(e){return e*(Math.PI/180)},d=function(e){var t=e.fov,a=e.near,n=e.far,r=e.defaultCameraZoom,o=e.renderer,c=e.camera,i=e.size,u=i.width,s=i.height,l=function(e){return s/(2*e*Math.tan(b(t/2)))},f=function(e){return s/e/(2*Math.tan(b(t/2)))},d=Object(m.c)().scaleExtent([l(n),l(a)]).on("zoom",(function(){!function(e){var t=e.x,a=e.y,n=e.k;c.position.set(-(t-u/2)/n,(a-s/2)/n,f(n))}(m.a.transform)})),p=Object(m.b)(o.domElement);p.call(d);var h=l(r),v=m.d.translate(u/2,s/2).scale(h);d.transform(p,v),c.position.set(0,0,r),p.on("dblclick.zoom",(function(){d.transform(p,v),c.position.set(0,0,r)}))},p=a(7),h=a(93),v=a(92),E=a(24),g=Object(E.a)({root:{height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus,&:hover,&$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(h.a),j=Object(E.a)({root:{color:"#8f8f8f"},thumb:{height:15,width:15,margintop:-5,marginleft:-5,color:"#787878"},valueLabel:{top:20,"& *":{background:"transparent",color:"#000",width:50}},rail:{height:5}})(h.a),O=function(e){var t=e.min,a=e.max,n=e.now,r=e.label,c=e.onChange;return o.a.createElement("div",{className:"row"},o.a.createElement(g,{className:"col-8 offset-2",defaultValue:0,valueLabelDisplay:"off","aria-label":"pretto slider",min:t,max:a,value:n,step:1,onChange:c}),o.a.createElement(v.a,{className:"col-2 align-self-center"},r))},y=function(e){var t=e.min,a=e.max,n=e.defaultValue,r=e.onChange;return o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement(j,{className:"col-3",defaultValue:n,valueLabelFormat:function(e){return"".concat(e," ms")},valueLabelDisplay:"on","aria-label":"pretto slider",min:t,max:a,step:100,onChange:r,track:!1}))},w=(a(77),a(7)),x=new w.Color(15724527),C=["#ffd700","#ffb14e","#fa8775","#ea5f94","#cd34b5","#9d02d7","#0000ff"],S=(new w.TextureLoader).load("textures/discNoShadow.png"),k=function(){return 50*(Math.random()-.5)},z=function(){var e=[];return Array(100).fill().forEach((function(){e.push(k(),k(),0)})),e},M=function(){var e=[];return Array(100).fill().forEach((function(){var t=new w.Color(C[parseInt(Math.random()*C.length)]),a=t.r,n=t.g,r=t.b;e.push(a,n,r)})),e},N=function(e){var t=e.data,a=t.points,c=t.colors,i=t.pointsData,u=e.setHoverData,s=Object(l.d)(),b=s.scene,h=s.aspect,v=s.gl,E=s.camera,g=s.size,j=s.mouse,O=Object(r.useRef)(),y=Object(r.useRef)(),C=Object(r.useRef)();Object(r.useEffect)((function(){d({fov:30,near:20,far:150,defaultCameraZoom:100,renderer:v,camera:E,size:g})}),[v,E,g]);var k=Object(r.useRef)(),z=Object(r.useMemo)((function(){return{point:new Float32Array(3),color:new Float32Array(3),show:!1}}),[]),M=Object(r.useCallback)((function(e){var t=e.index,a=e.x,n=e.y;N.slice(3*t,3*(t+1)).forEach((function(e,t){z.point[t]=e})),D.slice(3*t,3*(t+1)).forEach((function(e,t){z.color[t]=e})),z.show=!0,k.current.attributes.position.needsUpdate=!0,k.current.attributes.color.needsUpdate=!0;var r=c.slice(3*t,3*(t+1)).map((function(e){return e.toFixed(2)}));u(function(e){var t=e.description,a=e.top,n=e.left,r=e.size,c=n+150>r.width?r.right-150:Math.max(n-75,r.left);return o.a.createElement("div",{className:"hover-description",style:{top:a,left:c,width:150}},t)}({description:"mouse over: ".concat(i[t],"\nColor: rgb(").concat(r,")"),top:n,left:a,size:g}))}),[a,g,i,c]);!function(e){var t=e.renderer,a=e.mouse,n=e.camera,o=e.size,c=e.pointsRef,i=e.onPointHover,u=e.onPointOut,s=Object(r.useMemo)((function(){var e=new p.Raycaster;return e.params.Points.threshold=1,e}),[]),l=Object(r.useCallback)((function(e){s.setFromCamera(e,n);var t=s.intersectObject(c.current);if(t[0]){var a=t.sort((function(e){return e.distanceToRay}))[0],r=a.point;r.project(n).addScalar(1).divideScalar(2);var l=r.x*o.width,f=(1-r.y)*o.height;i({index:a.index,x:l,y:f})}else u()}),[o,i]);Object(r.useEffect)((function(){Object(m.b)(t.domElement).on("mousemove",(function(){l(a)}))}),[t,a,l])}({renderer:v,mouse:j,camera:E,size:g,pointsRef:y,onPointHover:M,onPointOut:function(){z.show=!1,u("")}});var N=Object(r.useMemo)((function(){return new Float32Array(300)}),[]),D=Object(r.useMemo)((function(){return new Float32Array(300)}),[]),A=Object(f.a)((function(){return{pointsSpring:a,colorsSpring:Array(300).fill(1)}})),R=Object(n.a)(A,2),L=R[0],T=L.pointsSpring,U=L.colorsSpring,V=R[1];return Object(r.useEffect)((function(){V({pointsSpring:a})}),[a,V]),Object(r.useEffect)((function(){V({colorsSpring:c})}),[c,V]),Object(l.c)((function(){T.getValue().forEach((function(e,t){var a=t%3===0?e*h:e;N[t]=a})),U.getValue().forEach((function(e,t){D[t]=e})),C.current.attributes.position.needsUpdate=!0,C.current.attributes.color.needsUpdate=!0})),Object(r.useEffect)((function(){b.background=x}),[b]),o.a.createElement("group",null,o.a.createElement("mesh",{ref:O},o.a.createElement("points",{ref:y},o.a.createElement("bufferGeometry",{attach:"geometry",ref:C},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:a.length/3,array:N,itemSize:3,usage:w.DynamicDrawUsage}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:a.length/3,array:D,itemSize:3,usage:w.DynamicDrawUsage})),o.a.createElement("pointsMaterial",{attach:"material",size:15,map:S,transparent:!0,alphaTest:.5,sizeAttenuation:!1,vertexColors:w.VertexColors}))),o.a.createElement("mesh",null,o.a.createElement("points",null,o.a.createElement("bufferGeometry",{attach:"geometry",ref:k},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:z.show,array:z.point,itemSize:3,usage:w.DynamicDrawUsage}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:1,array:z.color,itemSize:3,usage:w.DynamicDrawUsage})),o.a.createElement("pointsMaterial",{attach:"material",size:40,map:S,transparent:!0,alphaTest:.5,sizeAttenuation:!1,vertexColors:w.VertexColors}))))};i.a.render(o.a.createElement((function(){var e,t=(e="filepath",Object(r.useMemo)((function(){return{n:40}}),[e])).n,a=Object(r.useState)(1e3),c=Object(n.a)(a,2),i=c[0],f=c[1],m=Object(r.useState)(0),b=Object(n.a)(m,2),d=b[0],p=b[1],h=Object(r.useState)(!1),v=Object(n.a)(h,2),E=v[0],g=v[1],j=Object(r.useState)(""),w=Object(n.a)(j,2),x=w[0],C=w[1],S=Object(r.useMemo)((function(){return{points:z(),colors:M(),pointsData:M()}}),[d]),k=Object(r.useRef)(),D=Object(r.useState)(null),A=Object(n.a)(D,2),R=A[0],L=A[1];k.current={n:t,time:d,speed:i,play:E};var T=function(){R&&(clearTimeout(R),L(null))},U=function e(){var t=k.current,a=t.n,n=t.time,r=t.speed;n<a-1&t.play?(p(n+1),L(setTimeout(e,r))):(g(!1),T())},V=function(){var e=k.current,t=e.speed;e.play?(g(!1),T()):(g(!0),L(setTimeout(U,t)))};return Object(r.useEffect)((function(){document.addEventListener("keydown",(function(e){"Space"===e.code&&V()}))}),[]),o.a.createElement("div",{style:{height:"100%"}},o.a.createElement("div",{className:"canvas-container h-100"},o.a.createElement(l.a,{camera:{fov:30,near:.1,far:151,position:[0,0,100]}},o.a.createElement(N,{data:S,setHoverData:C})),x,o.a.createElement(O,{min:0,max:t-1,now:d,label:"".concat(d,"/").concat(t-1," gen"),onChange:function(e,t){return p(t)}}),o.a.createElement("div",{className:"controllers row justify-content-center"},o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return p(0)}},o.a.createElement(u.a,{icon:s.e})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return p((function(e){return Math.max(e-1,0)}))}},o.a.createElement(u.a,{icon:s.a})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:V},o.a.createElement(u.a,{icon:E?s.c:s.d})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return p((function(e){return Math.min(e+1,t-1)}))}},o.a.createElement(u.a,{icon:s.b})),o.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return p(t-1)}},o.a.createElement(u.a,{icon:s.f})))),o.a.createElement(y,{min:100,max:5e3,defaultValue:1e3,onChange:function(e,t){return f(t)}}),o.a.createElement("div",{className:"git-info row justify-content-end"},o.a.createElement("a",{href:"https://github.com/renato145/show_evolution"},"Source code"))))}),null),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.0497f273.chunk.js.map